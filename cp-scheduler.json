{
  "schedulerId": "cp",
  "triggers": [
    {
      "name": "Daily Scheduler",
      "type": "scheduler.triggers.Periodical",
      "env": {
        "interval": "86400000"
      },
      "jobs": [

      ]
    },
    {
      "name": "Competitive-Companion-Listener",
      "type": "scheduler.triggers.Web",
      "env": {
        "port": "50823",
        "rust-src": "${rust-main-proj}/src/"
      },
      "jobs": [
        {
          "name": "Archive task.json",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "MoveFile",
            "${task-json}",
            "${archive-folder}/${_execution_date}.json"
          ],
          "dependsOn": [],
          "frontend": true
        },
        {
          "name": "Generate task.json",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "ExportEnv"
          ],
          "dependsOn": ["Archive task.json?"],
          "frontend": true,
          "env": {
            "output": "${task-json}",
            "body": "${_request_body}"
          }
        },
        {
          "name": "Back up solver.rs",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "CopyFile",
            "${rust-src}/solver.rs",
            "${rust-src}/solver.rs.bak"
          ],
          "dependsOn": ["Generate task.json"],
          "frontend": true
        },
        {
          "name": "Archive solver.rs",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "MoveFile",
            "${rust-src}/solver.rs",
            "${archive-folder}/${_execution_date}.rs"
          ],
          "dependsOn": ["Back up solver.rs"],
          "frontend": true
        },
        {
          "name": "Archive stress_external_member.rs",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "MoveFile",
            "${rust-src}/stress_external_member.rs",
            "${archive-folder}/${_execution_date}.stress.rs"
          ],
          "dependsOn": ["Back up solver.rs"],
          "frontend": true
        },
        {
          "name": "Recover solver.rs",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "CopyFile",
            "${work-space}/rust/solver.rs",
            "${rust-src}/solver.rs"
          ],
          "dependsOn": ["Archive solver.rs"],
          "frontend": true
        },
        {
          "name": "Recover stress_external_member.rs",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "CopyFile",
            "${work-space}/rust/stress_external_member.rs",
            "${rust-src}/stress_external_member.rs"
          ],
          "dependsOn": ["Archive solver.rs"],
          "frontend": true
        }
      ]
    },
    {
      "name": "Exe-File-Monitor",
      "type": "scheduler.triggers.FileEvent",
      "env": {
        "filenames": "${exe}",
        "interval": 1000
      },
      "jobs": [
        {
          "name": "verify",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "Tester"
          ],
          "dependsOn": [],
          "frontend": "true",
          "env": {
            "ignore-interactive": "true",
            "commands": "${_changed_filepath}",
            "task-json": "${task-json}",
            "time-out": "10000"
          },
          "timeout": "15000"
        }
      ]
    },
    {
      "name": "Leetcode-Main-File-Monitor",
      "type": "scheduler.triggers.FileEvent",
      "env": {
        "filenames": "${leetcode-work-space}/src/main.rs",
        "interval": 1000
      },
      "jobs": [
        {
          "name": "inline-rust",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "RustInline",
            "${leetcode-work-space}",
            "${leetcode-work-space}/inline.rs"
          ],
          "dependsOn": [],
          "frontend": true
        },
        {
          "name": "format inline",
          "commands": [
            "rustfmt",
            "${leetcode-work-space}/inline.rs"
          ],
          "dependsOn": ["inline-rust"],
          "frontend": true
        },
        {
          "name": "copy-rust-inline",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "CopyFile",
            "${leetcode-work-space}/inline.rs",
            "${rust-inline-file}"
          ],
          "dependsOn": ["format inline"],
          "frontend": true
        }
      ]
    },
    {
      "name": "Contest-Solver-File-Monitor",
      "type": "scheduler.triggers.FileEvent",
      "env": {
        "filenames": "${rust-main-proj}/src/solver.rs",
        "interval": 1000
      },
      "jobs": [
        {
          "name": "inline-rust",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "RustInline",
            "${rust-main-proj}",
            "${rust-main-proj}/inline.rs"
          ],
          "dependsOn": [],
          "frontend": true
        },
        {
          "name": "format inline",
          "commands": [
            "rustfmt",
            "${rust-main-proj}/inline.rs"
          ],
          "dependsOn": ["inline-rust"],
          "frontend": true
        },
        {
          "name": "copy-rust-inline",
          "commands": [
            "java",
            "-cp",
            "${cp}/*",
            "CopyFile",
            "${rust-main-proj}/inline.rs",
            "${rust-inline-file}"
          ],
          "dependsOn": ["format inline"],
          "frontend": true
        }
      ]
    }
  ],
  "env": {
    "cpp-work-space": "F:/geany",
    "cpp-main-file": "${cpp-work-space}/main.cpp",
    "cpp-inline-file": "${work-space}/cpp/inline.cpp",
    "rust-work-space": "F:/sourcecode/rustcp",
    "rust-main-proj": "${rust-work-space}/contest",
    "rust-inline-file": "${work-space}/rust/inline.rs",
    "exe": "${cpp-work-space}/main.exe,${rust-work-space}/target/debug/contest.exe",
    "work-space": "D:/competitve-programming",
    "archive-folder": "${work-space}/archive",
    "task-json": "${work-space}/tasks/task.json",
    "cp": "F:/sourcecode/pipelien/libs",
    "leetcode-work-space": "F:/sourcecode/rustcp/leetcode"
  }
}